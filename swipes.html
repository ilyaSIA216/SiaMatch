<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–Ω–∞–∫–æ–º—Å—Ç–≤–∞ - Match –†–æ—Å—Å–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #f8f9fa;
            height: 100vh;
            overflow: hidden;
        }
        
        .container {
            max-width: 100%;
            height: 100vh;
            position: relative;
        }
        
        /* –®–∞–ø–∫–∞ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #333;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .back-btn:hover {
            background: #f0f0f0;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        .user-card {
            position: absolute;
            top: 80px;
            left: 20px;
            right: 20px;
            bottom: 120px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .user-photo {
            width: 100%;
            height: 60%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
            position: relative;
        }
        
        .photo-placeholder {
            font-size: 80px;
            text-align: center;
            color: white;
            opacity: 0.8;
            margin-bottom: 20px;
        }
        
        .photo-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
        }
        
        .user-info {
            padding: 25px;
        }
        
        .user-name-age {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .user-location {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .user-bio {
            color: #666;
            line-height: 1.5;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .user-interests {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .interest-tag {
            background: #f0f2f5;
            color: #667eea;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .actions {
            position: fixed;
            bottom: 30px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 0 20px;
        }
        
        .action-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        .btn-dislike {
            background: white;
            color: #ff6b6b;
            border: 2px solid #ff6b6b;
        }
        
        .btn-like {
            background: #4cd964;
            color: white;
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: white;
            z-index: 1000;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid #f0f0f0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */
        .no-users {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
        }
        
        .no-users-icon {
            font-size: 80px;
            margin-bottom: 20px;
            color: #667eea;
            opacity: 0.5;
        }
        
        .no-users-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .no-users-text {
            color: #666;
            margin-bottom: 30px;
            max-width: 300px;
            line-height: 1.5;
        }
        
        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
        }
        
        /* –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω */
        .access-denied {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
            background: white;
        }
        
        .access-icon {
            font-size: 80px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }
        
        .access-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .access-text {
            color: #666;
            margin-bottom: 30px;
            max-width: 300px;
            line-height: 1.5;
        }
        
        .access-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
    
    <script>
        // ========== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ==========
        const API_URL = 'https://laughing-space-fiesta-x57vjp5qgg4rc667v-3000.app.github.dev'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à API
        let currentUser = null;
        let likesRemaining = 15;
        let currentCardIndex = 0;
        let cards = [];
        
        // ========== –ü–†–û–í–ï–†–ö–ê –î–û–°–¢–£–ü–ê ==========
        
        const tg = Telegram.WebApp;
        tg.expand();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        if (!tg.initDataUnsafe || !tg.initDataUnsafe.user) {
            showAccessDenied('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Telegram');
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Ñ–æ—Ç–æ
        const photoStatus = localStorage.getItem('photo_status');
        if (photoStatus !== 'approved') {
            showAccessDenied(
                photoStatus === 'pending' 
                    ? '–§–æ—Ç–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.' 
                    : '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤'
            );
            return;
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
        const userProfile = JSON.parse(localStorage.getItem('match_profile') || '{}');
        if (!userProfile.age || userProfile.age < 18) {
            showAccessDenied('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —Å 18 –ª–µ—Ç');
            return;
        }
        
        // ========== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê ==========
        
        async function initApp() {
            showLoading(true);
            
            try {
                // 1. –ü–æ–ª—É—á–∞–µ–º –ª–∞–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                await fetchLikes();
                
                // 2. –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å–≤–∞–π–ø–æ–≤
                await loadUsersForSwipes();
                
                // 3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                renderInterface();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.');
            } finally {
                showLoading(false);
            }
        }
        
        async function fetchLikes() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å –∫ API
            // –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ–º localStorage
            const today = new Date().toISOString().split('T')[0];
            const lastReset = localStorage.getItem('last_likes_reset');
            
            if (lastReset !== today) {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å
                likesRemaining = 15;
                localStorage.setItem('last_likes_reset', today);
                localStorage.setItem('likes_remaining', '15');
            } else {
                likesRemaining = parseInt(localStorage.getItem('likes_remaining') || '15');
            }
        }
        
        async function loadUsersForSwipes() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å –∫ API —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π
            // –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
            
            const userCity = userProfile.city || '–ú–æ—Å–∫–≤–∞';
            
            cards = [
                {
                    id: 1,
                    name: "–ê–Ω–Ω–∞",
                    age: 25,
                    city: userCity,
                    distance: "2 –∫–º",
                    bio: "–õ—é–±–ª—é –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –Ω–æ–≤—ã–º–∏ –ª—é–¥—å–º–∏.",
                    interests: ["–°–ø–æ—Ä—Ç", "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è", "–ö–æ—Ñ–µ", "–ò—Å–∫—É—Å—Å—Ç–≤–æ"]
                },
                {
                    id: 2,
                    name: "–ú–∞—Ä–∏—è",
                    age: 23,
                    city: userCity,
                    distance: "3 –∫–º",
                    bio: "–°—Ç—É–¥–µ–Ω—Ç–∫–∞, —É–≤–ª–µ–∫–∞—é—Å—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π –∏ –∏–∑—É—á–µ–Ω–∏–µ–º —è–∑—ã–∫–æ–≤.",
                    interests: ["–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è", "–Ø–∑—ã–∫–∏", "–ö–Ω–∏–≥–∏", "–ú—É–∑—ã–∫–∞"]
                },
                {
                    id: 3,
                    name: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞",
                    age: 27,
                    city: userCity,
                    distance: "5 –∫–º",
                    bio: "–†–∞–±–æ—Ç–∞—é –≤ IT, –ª—é–±–ª—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Å–ø–æ—Ä—Ç –∏ —Ö–æ—Ä–æ—à—É—é –∫—É—Ö–Ω—é.",
                    interests: ["–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", "–°–ø–æ—Ä—Ç", "–ö—É–ª–∏–Ω–∞—Ä–∏—è", "–ö–∏–Ω–æ"]
                }
            ];
            
            currentCardIndex = 0;
        }
        
        // ========== –†–ï–ù–î–ï–†–ò–ù–ì ==========
        
        function showLoading(show) {
            const container = document.getElementById('container');
            if (show) {
                container.innerHTML = `
                    <div class="loading">
                        <div class="loader"></div>
                        <p>–ò—â–µ–º –ª—é–¥–µ–π —Ä—è–¥–æ–º...</p>
                    </div>
                `;
            }
        }
        
        function showAccessDenied(message) {
            const container = document.getElementById('container');
            container.innerHTML = `
                <div class="access-denied">
                    <div class="access-icon">üîí</div>
                    <div class="access-title">–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω</div>
                    <div class="access-text">${message}</div>
                    
                    <button class="access-btn" onclick="goToMain()">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                    
                    ${photoStatus === 'none' ? `
                        <button class="access-btn" onclick="goToUploadPhoto()" style="background: #ffd166; color: #333;">
                            üì∏ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                        </button>
                    ` : ''}
                </div>
            `;
        }
        
        function showError(message) {
            const container = document.getElementById('container');
            container.innerHTML = `
                <div class="access-denied">
                    <div class="access-icon">‚ö†Ô∏è</div>
                    <div class="access-title">–û—à–∏–±–∫–∞</div>
                    <div class="access-text">${message}</div>
                    
                    <button class="access-btn" onclick="location.reload()">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button class="access-btn" onclick="goToMain()" style="background: #667eea;">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                </div>
            `;
        }
        
        function renderInterface() {
            if (cards.length === 0) {
                showNoUsers();
                return;
            }
            
            const currentCard = cards[currentCardIndex];
            const container = document.getElementById('container');
            
            container.innerHTML = `
                <div class="header">
                    <button class="back-btn" onclick="goToMain()">‚Üê</button>
                    <div class="stats">
                        <div class="stat-item">
                            <span>‚ù§Ô∏è</span>
                            <span id="likes-count">${likesRemaining}/15</span>
                        </div>
                        <div class="stat-item">
                            <span>üìç</span>
                            <span>${userProfile.city || '–ì–æ—Ä–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω'}</span>
                        </div>
                    </div>
                </div>
                
                <div class="user-card">
                    <div class="user-photo">
                        <div class="photo-placeholder">üë§</div>
                        <div class="photo-gradient"></div>
                    </div>
                    <div class="user-info">
                        <div class="user-name-age">${currentCard.name}, ${currentCard.age}</div>
                        <div class="user-location">
                            üìç ${currentCard.city} ‚Ä¢ ${currentCard.distance} –æ—Ç –≤–∞—Å
                        </div>
                        <div class="user-bio">${currentCard.bio}</div>
                        <div class="user-interests">
                            ${currentCard.interests.map(interest => 
                                `<span class="interest-tag">${interest}</span>`
                            ).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="actions">
                    <button class="action-btn btn-dislike" onclick="swipeLeft()" id="dislike-btn">
                        üëé
                    </button>
                    <button class="action-btn btn-like" onclick="swipeRight()" id="like-btn">
                        ‚ù§Ô∏è
                    </button>
                </div>
            `;
        }
        
        function showNoUsers() {
            const container = document.getElementById('container');
            container.innerHTML = `
                <div class="no-users">
                    <div class="no-users-icon">üë•</div>
                    <div class="no-users-title">–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ —Ä—è–¥–æ–º</div>
                    <div class="no-users-text">
                        –í –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ –ø–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.<br>
                        –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –¥—Ä—É–∑—å—è–º –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!
                    </div>
                    <button class="refresh-btn" onclick="refreshUsers()">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button class="refresh-btn" onclick="goToMain()" style="background: #667eea; margin-top: 10px;">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                </div>
            `;
        }
        
        // ========== –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê ==========
        
        async function swipeLeft() {
            if (currentCardIndex >= cards.length - 1) {
                showNoUsers();
                return;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–∞–π–ø–∞ –≤–ª–µ–≤–æ
            animateSwipe('left');
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ
            currentCardIndex++;
            setTimeout(() => {
                renderInterface();
            }, 300);
        }
        
        async function swipeRight() {
            if (likesRemaining <= 0) {
                tg.showAlert('–õ–∞–π–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!');
                return;
            }
            
            const currentCard = cards[currentCardIndex];
            
            // –£–º–µ–Ω—å—à–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤
            likesRemaining--;
            localStorage.setItem('likes_remaining', likesRemaining.toString());
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–∞–π–ø–∞ –≤–ø—Ä–∞–≤–æ
            animateSwipe('right');
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–∞–π–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            await sendLike(currentCard.id);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            tg.showAlert(`–í—ã –ª–∞–π–∫–Ω—É–ª–∏ ${currentCard.name}! ‚ù§Ô∏è`);
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ
            currentCardIndex++;
            setTimeout(() => {
                if (currentCardIndex >= cards.length) {
                    showNoUsers();
                } else {
                    renderInterface();
                }
            }, 300);
        }
        
        async function sendLike(userId) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            try {
                // –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
                // await fetch(`${API_URL}/api/like`, {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json',
                //         'Authorization': `Bearer ${tg.initData}`
                //     },
                //     body: JSON.stringify({
                //         targetUserId: userId,
                //         swiperId: tg.initDataUnsafe.user.id
                //     })
                // });
                
                console.log('–õ–∞–π–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:', userId);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –º—ç—Ç—á
                checkForMatch(userId);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∞–π–∫–∞:', error);
            }
        }
        
        async function checkForMatch(userId) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
            // –°–µ–π—á–∞—Å —Å–ª—É—á–∞–π–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 30%
            if (Math.random() < 0.3) {
                setTimeout(() => {
                    const currentCard = cards.find(card => card.id === userId);
                    if (currentCard) {
                        tg.showAlert(`üéâ –£ –≤–∞—Å –≤–∑–∞–∏–º–Ω—ã–π –ª–∞–π–∫ —Å ${currentCard.name}!`);
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º—ç—Ç—á
                        saveMatch(currentCard);
                    }
                }, 500);
            }
        }
        
        function saveMatch(user) {
            const matches = JSON.parse(localStorage.getItem('matches') || '[]');
            matches.push({
                ...user,
                matchedAt: new Date().toISOString()
            });
            localStorage.setItem('matches', JSON.stringify(matches));
        }
        
        function animateSwipe(direction) {
            const card = document.querySelector('.user-card');
            if (!card) return;
            
            card.style.transition = 'transform 0.3s ease-out';
            card.style.transform = direction === 'left' 
                ? 'translateX(-100%) rotate(-20deg)' 
                : 'translateX(100%) rotate(20deg)';
            card.style.opacity = '0';
        }
        
        function refreshUsers() {
            currentCardIndex = 0;
            initApp();
        }
        
        // ========== –ù–ê–í–ò–ì–ê–¶–ò–Ø ==========
        
        function goToMain() {
            window.location.href = 'app.html';
        }
        
        function goToUploadPhoto() {
            window.location.href = 'upload-photo.html';
        }
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
