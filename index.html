<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SiaMatch - –ó–Ω–∞–∫–æ–º—Å—Ç–≤–∞</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- –®–∞–≥ 0: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
        <div id="step-0" class="step">
            <div style="text-align: center; margin-top: 100px;">
                <div style="font-size: 60px; margin-bottom: 20px;">üíñ</div>
                <h1>üçÄ SiaMatch</h1>
                <p id="welcome-text" style="color: #666; margin: 30px 0;">–ü—Ä–∏–≤–µ—Ç!</p>
                <button class="btn" onclick="startOnboarding()">–ù–∞—á–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ</button>
            </div>
        </div>

        <!-- –®–∞–≥ 1: –ò–º—è -->
        <div id="step-1" class="step hidden">
            <button class="back-btn" onclick="goToStep(0)">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="progress-indicator">
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
            </div>
            
            <h2>–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?</h2>
            <p style="color: #666; margin: 15px 0 30px 0;">
                –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è
            </p>
            
            <div class="input-group">
                <input type="text" id="name-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–Ω–Ω–∞" maxlength="30">
                <p class="form-note">–ë—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ</p>
            </div>
            
            <button class="btn" onclick="saveName()">–î–∞–ª–µ–µ</button>
        </div>
        
        <!-- –®–∞–≥ 2: –í–æ–∑—Ä–∞—Å—Ç -->
        <div id="step-2" class="step hidden">
            <button class="back-btn" onclick="goToStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="progress-indicator">
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
            </div>
            
            <h2>–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?</h2>
            <p style="color: #666; margin: 15px 0 30px 0;">
                –û—Ç 18 –¥–æ 60 –ª–µ—Ç
            </p>
            
            <div class="input-group">
                <select id="age-select">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç</option>
                </select>
            </div>
            
            <button class="btn" onclick="saveAge()">–î–∞–ª–µ–µ</button>
        </div>
        
        <!-- –®–∞–≥ 3: –ì–æ—Ä–æ–¥ -->
        <div id="step-3" class="step hidden">
            <button class="back-btn" onclick="goToStep(2)">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="progress-indicator">
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
            </div>
            
            <h2>–ò–∑ –∫–∞–∫–æ–≥–æ –≤—ã –≥–æ—Ä–æ–¥–∞?</h2>
            <p style="color: #666; margin: 15px 0 30px 0;">
                –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞
            </p>
            
            <div class="input-group">
                <select id="city-select">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                </select>
            </div>
            
            <button class="btn" onclick="saveCity()">–î–∞–ª–µ–µ</button>
        </div>
        
        <!-- –®–∞–≥ 4: –û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ -->
        <div id="step-4" class="step hidden">
            <button class="back-btn" onclick="goToStep(3)">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="progress-indicator">
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
            </div>
            
            <h2>–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ —Ñ–æ—Ç–æ</h2>
            <p style="color: #666; margin: 15px 0 30px 0;">
                –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ –ª—É—á—à–µ–µ —Ñ–æ—Ç–æ. –û–Ω–æ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ
            </p>
            
            <div class="photo-upload" onclick="document.getElementById('main-photo-input').click()">
                <div style="font-size: 48px;">üì∏</div>
                <div style="color: #666; margin: 10px 0;">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</div>
                <div style="color: #888; font-size: 14px;">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: –¥–æ 5MB</div>
            </div>
            
            <img id="main-photo-preview" class="photo-preview" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ" style="display: none;">
            
            <input type="file" id="main-photo-input" class="hidden" 
                   accept="image/*" onchange="previewMainPhoto(event)">
            
            <button class="btn" onclick="saveMainPhoto()">–î–∞–ª–µ–µ</button>
        </div>
        
        <!-- –®–∞–≥ 5: –°–µ–ª—Ñ–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
        <div id="step-5" class="step hidden">
            <button class="back-btn" onclick="goToStep(4)">‚Üê –ù–∞–∑–∞–¥</button>
            
            <div class="progress-indicator">
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
                <div class="step-dot active"></div>
            </div>
            
            <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏</h2>
            <p style="color: #666; margin: 15px 0 30px 0;">
                –°–¥–µ–ª–∞–π—Ç–µ —Å–µ–ª—Ñ–∏ —Å–µ–π—á–∞—Å, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã
            </p>
            
            <div class="photo-upload" onclick="document.getElementById('selfie-input').click()">
                <div style="font-size: 48px;">ü§≥</div>
                <div style="color: #666; margin: 10px 0;">–°–¥–µ–ª–∞–π—Ç–µ —Å–µ–ª—Ñ–∏ —Å–µ–π—á–∞—Å</div>
                <div style="color: #888; font-size: 14px;">–≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            </div>
            
            <img id="selfie-preview" class="photo-preview" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–µ–ª—Ñ–∏" style="display: none;">
            
            <input type="file" id="selfie-input" class="hidden" 
                   accept="image/*" onchange="previewSelfie(event)">
            
            <button class="btn" onclick="saveSelfie()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</button>
        </div>
        
        <!-- –®–∞–≥ 6: –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ -->
        <div id="step-6" class="step hidden">
            <div style="text-align: center; padding: 60px 20px;">
                <div style="font-size: 80px; margin-bottom: 30px;">‚è≥</div>
                <h2>–î–∞–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</h2>
                <p style="color: #666; margin: 20px 0; line-height: 1.6;">
                    –í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.<br>
                    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
                </p>
                
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <button class="btn-secondary" onclick="goToStep(0)" style="margin-top: 40px;">
                    ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
                </button>
            </div>
        </div>

        <!-- –®–∞–≥ 7: –î–∞—à–±–æ—Ä–¥ (–ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è) -->
        <div id="step-7" class="step hidden">
            <div class="dashboard-nav">
                <button class="nav-btn active" onclick="showTab('swipe')">üë•</button>
                <button class="nav-btn" onclick="showTab('matches')">üíå</button>
                <button class="nav-btn" onclick="showTab('profile')">üë§</button>
                <button class="nav-btn" onclick="openAdminPanel()">üëë</button>
            </div>

            <div id="tab-content">
                <!-- –í–∫–ª–∞–¥–∫–∞ —Å–≤–∞–π–ø–æ–≤ -->
                <div id="tab-swipe" class="tab-pane">
                    <div style="text-align: center; padding: 40px 20px;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üë•</div>
                        <h2>–ù–∞–π—Ç–∏ –ø–∞—Ä—É</h2>
                        <p style="color: #666; margin: 20px 0;">–ù–∞—á–Ω–∏—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—ã</p>
                        <button class="btn" onclick="startSwiping()">–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫</button>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –º—ç—Ç—á–µ–π -->
                <div id="tab-matches" class="tab-pane hidden">
                    <div style="padding: 20px;">
                        <h3>–í–∞—à–∏ –º—ç—Ç—á–∏</h3>
                        <div id="matches-list" class="user-list">
                            <div style="text-align: center; padding: 40px; color: #666;">
                                –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –º—ç—Ç—á–µ–π
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div id="tab-profile" class="tab-pane hidden">
                    <div style="padding: 20px;">
                        <h3>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                        <div id="profile-info">
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 12px; margin: 20px 0;">
                                <p><strong>–ò–º—è:</strong> <span id="profile-name">-</span></p>
                                <p><strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> <span id="profile-age">-</span></p>
                                <p><strong>–ì–æ—Ä–æ–¥:</strong> <span id="profile-city">-</span></p>
                                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span style="color: #4caf50;">‚úì –û–¥–æ–±—Ä–µ–Ω–æ</span></p>
                            </div>
                        </div>
                        <button class="btn-secondary" onclick="editProfile()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥ -->
    <style>
        .back-btn {
            background: none;
            border: none;
            color: #666;
            font-size: 16px;
            cursor: pointer;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .back-btn:hover {
            color: #333;
        }
        
        .loading-dots {
            display: inline-flex;
            margin-top: 30px;
            gap: 8px;
        }
        
        .loading-dots span {
            width: 12px;
            height: 12px;
            background: #667eea;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }
        
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
    </style>

    <script src="app.js"></script>
    
    <script>
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è index.html
        let userProfile = {
            telegramId: null,
            username: null,
            firstName: null,
            age: null,
            city: null,
            mainPhoto: null,
            selfiePhoto: null,
            status: 'pending'
        };

        // –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏
        const russianCities = [
            "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥",
            "–ö–∞–∑–∞–Ω—å", "–ß–µ–ª—è–±–∏–Ω—Å–∫", "–û–º—Å–∫", "–°–∞–º–∞—Ä–∞", "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É", "–£—Ñ–∞", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
            "–í–æ—Ä–æ–Ω–µ–∂", "–ü–µ—Ä–º—å", "–í–æ–ª–≥–æ–≥—Ä–∞–¥", "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–°–∞—Ä–∞—Ç–æ–≤", "–¢—é–º–µ–Ω—å", "–¢–æ–ª—å—è—Ç—Ç–∏",
            "–ò–∂–µ–≤—Å–∫", "–ë–∞—Ä–Ω–∞—É–ª", "–£–ª—å—è–Ω–æ–≤—Å–∫", "–ò—Ä–∫—É—Ç—Å–∫", "–•–∞–±–∞—Ä–æ–≤—Å–∫", "–Ø—Ä–æ—Å–ª–∞–≤–ª—å",
            "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫", "–ú–∞—Ö–∞—á–∫–∞–ª–∞", "–¢–æ–º—Å–∫", "–û—Ä–µ–Ω–±—É—Ä–≥", "–ö–µ–º–µ—Ä–æ–≤–æ"
        ].sort((a, b) => a.localeCompare(b, 'ru'));

        function startOnboarding() {
            console.log('–ù–∞—á–∞–ª–æ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞');
            goToStep(1);
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏
            populateAgeSelect();
            populateCitySelect();
        }

        function populateAgeSelect() {
            const select = document.getElementById('age-select');
            
            // –û—á–∏—â–∞–µ–º, –æ—Å—Ç–∞–≤–ª—è—è –ø–µ—Ä–≤—ã–π option
            while (select.options.length > 1) {
                select.removeChild(select.lastChild);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç–∞ 18-60
            for (let age = 18; age <= 60; age++) {
                const option = document.createElement('option');
                option.value = age;
                option.textContent = `${age} –ª–µ—Ç`;
                select.appendChild(option);
            }
        }

        function populateCitySelect() {
            const select = document.getElementById('city-select');
            
            // –û—á–∏—â–∞–µ–º, –æ—Å—Ç–∞–≤–ª—è—è –ø–µ—Ä–≤—ã–π option
            while (select.options.length > 1) {
                select.removeChild(select.lastChild);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≥–æ—Ä–æ–¥–∞
            russianCities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                select.appendChild(option);
            });
        }

        function goToStep(stepNumber) {
            console.log(`–ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É ${stepNumber}`);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —à–∞–≥–∏
            for (let i = 0; i <= 7; i++) {
                const element = document.getElementById(`step-${i}`);
                if (element) element.classList.add('hidden');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —à–∞–≥
            const target = document.getElementById(`step-${step}`);
            if (target) target.classList.remove('hidden');
        }

        function updateProgressIndicator(currentStep) {
            if (currentStep < 1 || currentStep > 5) return;
            
            const indicators = document.querySelectorAll('.step-dot');
            indicators.forEach((dot, index) => {
                if (index < currentStep) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function saveName() {
            const nameInput = document.getElementById('name-input');
            const name = nameInput.value.trim();
            
            if (!name) {
                alert('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è');
                nameInput.focus();
                return;
            }
            
            if (name.length < 2) {
                alert('–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞');
                nameInput.focus();
                return;
            }
            
            userProfile.firstName = name;
            console.log('–ò–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ:', userProfile.firstName);
            goToStep(2);
        }

        function saveAge() {
            const ageSelect = document.getElementById('age-select');
            const age = parseInt(ageSelect.value);
            
            if (!age || age < 18 || age > 60) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç –æ—Ç 18 –¥–æ 60 –ª–µ—Ç');
                ageSelect.focus();
                return;
            }
            
            userProfile.age = age;
            console.log('–í–æ–∑—Ä–∞—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω:', userProfile.age);
            goToStep(3);
        }

        function saveCity() {
            const citySelect = document.getElementById('city-select');
            const city = citySelect.value;
            
            if (!city) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –≥–æ—Ä–æ–¥');
                citySelect.focus();
                return;
            }
            
            userProfile.city = city;
            console.log('–ì–æ—Ä–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω:', userProfile.city);
            goToStep(4);
        }

        function previewMainPhoto(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('main-photo-preview');
                preview.src = e.target.result;
                preview.style.display = 'block';
                
                userProfile.mainPhoto = e.target.result;
                console.log('–û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification('–§–æ—Ç–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!');
            };
            
            reader.readAsDataURL(file);
        }

        function previewSelfie(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('selfie-preview');
                preview.src = e.target.result;
                preview.style.display = 'block';
                
                userProfile.selfiePhoto = e.target.result;
                console.log('–°–µ–ª—Ñ–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification('–°–µ–ª—Ñ–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!');
            };
            
            reader.readAsDataURL(file);
        }

        function showNotification(text) {
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.textContent = text;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #4caf50;
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        function saveMainPhoto() {
            if (!userProfile.mainPhoto) {
                alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ —Ñ–æ—Ç–æ');
                return;
            }
            
            console.log('–û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
            goToStep(5);
        }

        async function saveSelfie() {
            if (!userProfile.selfiePhoto) {
                alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ–ª—Ñ–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è');
                return;
            }
            
            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
            if (confirm('–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–∫–µ—Ç—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É? –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.')) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å
                userProfile.status = 'pending';
                userProfile.registeredAt = new Date().toISOString();
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('sia_user', JSON.stringify(userProfile));
                
                // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä...');
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —ç–∫—Ä–∞–Ω—É –æ–∂–∏–¥–∞–Ω–∏—è
                goToStep(6);
                
                // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
                setTimeout(() => {
                    // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
                    // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ –æ–¥–æ–±—Ä–µ–Ω–Ω–æ–≥–æ –¥–ª—è –¥–µ–º–æ
                    userProfile.status = 'approved';
                    localStorage.setItem('sia_user', JSON.stringify(userProfile));
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤ –¥–∞—à–±–æ—Ä–¥–µ
                    updateProfileInfo();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞—à–±–æ—Ä–¥
                    goToStep(7);
                    
                    alert('üéâ –í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞.');
                }, 3000);
            }
        }

        function updateProfileInfo() {
            document.getElementById('profile-name').textContent = userProfile.firstName || '-';
            document.getElementById('profile-age').textContent = userProfile.age || '-';
            document.getElementById('profile-city').textContent = userProfile.city || '-';
        }

        function showTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-pane').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            const btn = document.querySelector(`button[onclick*="${tabName}"]`);
            if (btn) btn.classList.add('active');
        }

        function startSwiping() {
            alert('–§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞!');
        }

        function editProfile() {
            alert('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ!');
        }

        function openAdminPanel() {
            window.open('admin.html', '_blank');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const savedUser = localStorage.getItem('sia_user');
            if (savedUser) {
                userProfile = JSON.parse(savedUser);
                
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–¥–æ–±—Ä–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞—à–±–æ—Ä–¥
                if (userProfile.status === 'approved') {
                    updateProfileInfo();
                    goToStep(7);
                } 
                // –ï—Å–ª–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
                else if (userProfile.status === 'pending') {
                    goToStep(6);
                }
            }
            
            // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
            const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user;
            if (tgUser?.first_name) {
                document.getElementById('welcome-text').textContent = `–ü—Ä–∏–≤–µ—Ç, ${tgUser.first_name}!`;
                
                // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ–º –∏–º—è
                if (!userProfile.firstName) {
                    document.getElementById('name-input').value = tgUser.first_name;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º Telegram ID
                if (!userProfile.telegramId) {
                    userProfile.telegramId = tgUser.id;
                }
            }
        });
    </script>
</body>
</html>
